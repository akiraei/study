## **논블로킹 I/O 동작 과정**

1. **OS는 서버(이벤트 루프)를 실행하며, CPU가 이벤트 루프를 처리하도록 할당.**
    
    - 애플리케이션이 실행되면 OS는 CPU를 통해 **이벤트 루프(Event Loop)**를 실행합니다.
    - 이벤트 루프는 **I/O 작업, 타이머, 네트워크 요청** 등을 처리하기 위한 중앙 실행 흐름입니다.
2. **CPU는 이벤트 루프를 돌리고, I/O 작업 요청을 OS에게 전달.**
    
    - 이벤트 루프는 클라이언트 요청이나 작업 명령(I/O 작업)을 받습니다.
    - CPU는 해당 작업을 OS 커널에 **논블로킹 방식**으로 요청합니다.
3. **OS는 작업을 하드웨어 장치로 전달.**
    
    - OS는 요청을 하드웨어 장치(디스크, 네트워크 인터페이스 컨트롤러 등)에 위임.
    - 하드웨어 장치는 I/O 작업(파일 읽기, 네트워크 패킷 처리 등)을 자체적으로 수행합니다.
4. **하드웨어 장치의 CPU가 작업을 처리하고, OS로 결과를 반환.**
    
    - 하드웨어 장치(예: 디스크 컨트롤러, NIC)는 내장된 프로세서(CPU)를 사용하여 작업을 처리.
    - 작업이 완료되면 OS 커널에 결과를 반환.
5. **OS는 작업 완료를 이벤트 루프에 알림.**
    
    - 작업이 완료되었음을 이벤트 루프가 인지할 수 있도록 **이벤트 큐** 또는 **인터럽트**를 통해 알림.
6. **CPU는 이벤트 루프에서 완료된 작업을 처리.**
    
    - 이벤트 루프는 작업 완료 콜백(Callback)을 실행하거나 결과를 사용자에게 반환.
    - 이후, 대기 중인 다음 작업으로 넘어감.

---

## **논블로킹 I/O의 세부 흐름**

|**단계**|**책임자**|**설명**|
|---|---|---|
|1. 서버 실행|OS, CPU|OS가 CPU를 통해 애플리케이션(이벤트 루프)을 실행.|
|2. I/O 요청 전달|CPU, OS|CPU가 I/O 작업을 OS 커널에 요청.|
|3. 작업 위임|OS → 하드웨어|OS는 요청을 디스크 컨트롤러, NIC 등 하드웨어 장치에 전달.|
|4. 작업 수행|하드웨어 장치|하드웨어의 내장 프로세서가 I/O 작업 수행.|
|5. 결과 반환|하드웨어 → OS|작업이 완료되면 OS에 결과를 반환.|
|6. 작업 완료 알림|OS → 이벤트 루프|OS가 완료된 작업을 이벤트 루프에 알림.|
|7. 작업 처리|CPU(이벤트 루프)|CPU가 완료된 작업을 이벤트 루프에서 처리하고, 다음 작업으로 이동.|

---

## **추가적으로 이해해야 할 점**

### **1. 이벤트 루프가 직접 작업을 수행하지 않음**

이벤트 루프는 작업을 받아 큐에 넣고, **작업 실행은 OS와 하드웨어에 위임**합니다. CPU는 이벤트 루프 자체를 실행하는 역할만 합니다.

---

### **2. CPU는 항상 I/O 요청 처리에 전념하지 않음**

CPU는 이벤트 루프의 작업 스케줄링 및 다른 애플리케이션 로직도 동시에 처리합니다. CPU는 주어진 자원을 효율적으로 분배하며, 이벤트 루프는 이런 작업 중 하나일 뿐입니다.

---

### **3. 하드웨어 장치의 독립성**

하드웨어 장치에는 **전용 프로세서와 메모리**가 있기 때문에, CPU가 작업 완료를 기다릴 필요가 없습니다. 이 독립성 덕분에 논블로킹 작업 모델이 가능합니다.

---

## **결론**

정리하자면, 논블로킹 I/O의 동작 과정은 다음과 같이 이루어집니다:

1. **OS는 CPU로 이벤트 루프를 실행.**
2. **CPU는 이벤트 루프를 돌리며 작업을 OS에 요청.**
3. **OS는 작업을 하드웨어 장치로 위임.**
4. **하드웨어 장치가 자체 프로세서로 작업을 수행.**
5. **OS는 작업 완료를 이벤트 루프에 알림.**
6. **CPU는 이벤트 루프를 통해 완료된 작업을 처리.**

이 과정에서 CPU는 효율적으로 이벤트 루프와 다른 작업을 병행 처리하며, 하드웨어 장치의 독립성 덕분에 CPU가 블로킹되지 않고 논블로킹 모델을 구현할 수 있습니다.